{"ast":null,"code":"import _defineProperty from\"/Users/yehuang/309_group/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";export var readDoctorCookie=function readDoctorCookie(app){var url=\"/doctors/check-session\";fetch(url).then(function(res){if(res.status===200){return res.json();}}).then(function(json){if(json&&json.currentDoctor){app.setState({currentDoctor:json.currentDoctor});}}).catch(function(error){console.log(error);});};export var readSelectedDoctorCookie=function readSelectedDoctorCookie(app){var url=\"/doctors/contact-session\";fetch(url).then(function(res){if(res.status===200){return res.json();}}).then(function(json){if(json&&json.selectedDoctor){app.setState({selectedDoctor:json.selectedDoctor});}}).catch(function(error){console.log(error);});};export var updateLoginForm=function updateLoginForm(loginComp,field){var value=field.value;var name=field.name;loginComp.setState(_defineProperty({},name,value));};export var login=function login(loginComp,app){var request=new Request(\"/doctors/login\",{method:\"post\",body:JSON.stringify(loginComp.state),headers:{Accept:\"application/json, text/plain, */*\",\"Content-Type\":\"application/json\"}});fetch(request).then(function(res){if(res.status===200){return res.json();}}).then(function(json){console.log(json);if(json.currentDoctor!==undefined){app.setState({currentDoctor:json.currentDoctor});}}).catch(function(error){console.log(error);loginComp.setState({wrong:true});});};export var logout=function logout(app){var url=\"/logout\";fetch(url).then(function(res){app.setState({currentDoctor:null,message:{type:\"\",body:\"\"}});}).catch(function(error){console.log(error);});};export var getDoctors=function getDoctors(ppc){var url=\"/doctors\";fetch(url).then(function(res){if(res.status===200){return res.json();}}).then(function(json){ppc.setState({doctorInfo:json});}).catch(function(error){console.log(error);});};var updateWatchlist=function updateWatchlist(doctor,patient){var url=\"/doctors\";console.log(patient);console.log(doctor);var request=new Request(url,{method:\"put\",body:JSON.stringify({patient:patient,doctor:doctor}),headers:{Accept:\"application/json, text/plain, */*\",\"Content-Type\":\"application/json\"}});return new Promise(function(resolve){fetch(request).then(function(res){if(res.status===200){return res.json();}}).then(function(json){resolve(json);}).catch(function(error){console.log(error);});});};export var addPatientToWatchlist=function addPatientToWatchlist(button,doctor,patient,app){updateWatchlist(doctor,patient).then(function(res){if(res){app.state.currentDoctor.watchlist=res.watchlist;button.innerText='Added!';setTimeout(function(){button.innerText='Add to List';},1000);}else{button.innerText='Failed!';setTimeout(function(){button.innerText='Add to List';},1000);}});};export var removePatientFromWatchlist=function removePatientFromWatchlist(app){var url=\"/doctors/delfwlist\";var doctor=app.state.currDoctor;var patient=app.state.curr;var request=new Request(url,{method:\"put\",body:JSON.stringify({patient:patient,doctor:doctor}),headers:{Accept:\"application/json, text/plain, */*\",\"Content-Type\":\"application/json\"}});fetch(request).then(function(res){if(res.status===200){return res.json();}else{throw new Error();}}).then(function(json){if(json!==null&&json!==undefined){app.setState({currDoctor:json});}}).catch(function(error){console.log(error);});};export var updateSelectedPatient=function updateSelectedPatient(){var url=\"/patients/contact-session\";var request=new Request(url,{method:\"put\",body:JSON.stringify({selectedPatient:null}),headers:{Accept:\"application/json, text/plain, */*\",\"Content-type\":\"application/json\"}});return new Promise(function(resolve){fetch(request).then(function(res){if(res.status===200){return res.json();}}).then(function(json){resolve(json);});}).catch(function(error){console.log(error);});};export var AddToWatchlist=function AddToWatchlist(app,button,doctor,patient){var url=\"/doctors\";console.log(patient);console.log(doctor);console.log(\"Add to watchlist called\");var request=new Request(url,{method:\"put\",body:JSON.stringify({patient:patient,doctor:doctor}),headers:{Accept:\"application/json, text/plain, */*\",\"Content-Type\":\"application/json\"}});fetch(request).then(function(res){if(res.status===200){// console.log(\"request normal\")\nreturn res.json();}else{throw new Error();}}).then(function(json){if(json!==undefined&&json!==null){button.disabled=true;// console.log(json)\napp.setState({watchlist:json.watchlist,success:\"Patient added to watchlist!\",error:\"\"});}else{throw new Error();}}).catch(function(error){button.disabled=true;app.setState({error:\"Failed to add patient to watchlist\",success:\"\"});setTimeout(function(){button.disabled=false;},1000);});};export var endDoctorChat=function endDoctorChat(app){updateSelectedPatient().then(function(json){if(json){app.setState({selectedPatient:json.selectedPatient});}}).catch(function(error){console.log(error);});};export var getPatients=function getPatients(app){var url=\"/patients\";fetch(url).then(function(res){if(res.status===200){return res.json();}else{throw new Error();}}).then(function(json){if(json!==null&&json!==undefined){console.log(json);app.setState({patients:json});// app.setState({error: \"success\"})\n}else{app.setState({error:\"Cannot retrieve patient accounts information!\"});}}).catch(function(e){console.log(\"error caught\");app.setState({error:\"Cannot retrieve patient accounts information!\"});});};export var getWatchlist=function getWatchlist(app,id){var url=\"/doctors/get-doctor-by-id/\".concat(id);console.log(id);fetch(url).then(function(res){if(res.status===200){console.log(\"returning json\");return res.json();}else{throw new Error();}}).then(function(json){if(json!==null&&json!==undefined){console.log(json);app.setState({watchlist:json.watchlist});}else{throw new Error();}}).catch(function(e){console.log(e);});};","map":{"version":3,"sources":["/Users/yehuang/309_group/client/src/actions/doctor.js"],"names":["readDoctorCookie","app","url","fetch","then","res","status","json","currentDoctor","setState","catch","error","console","log","readSelectedDoctorCookie","selectedDoctor","updateLoginForm","loginComp","field","value","name","login","request","Request","method","body","JSON","stringify","state","headers","Accept","undefined","wrong","logout","message","type","getDoctors","ppc","doctorInfo","updateWatchlist","doctor","patient","Promise","resolve","addPatientToWatchlist","button","watchlist","innerText","setTimeout","removePatientFromWatchlist","currDoctor","curr","Error","updateSelectedPatient","selectedPatient","AddToWatchlist","disabled","success","endDoctorChat","getPatients","patients","e","getWatchlist","id"],"mappings":"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","sourcesContent":["export const readDoctorCookie = (app) => {\n    const url = \"/doctors/check-session\";\n    fetch(url)\n        .then((res) => {\n            if (res.status === 200) {\n                return res.json();\n            }\n        })\n        .then((json) => {\n            if (json && json.currentDoctor) {\n                app.setState({currentDoctor: json.currentDoctor});\n            }\n        })\n        .catch((error) => {\n            console.log(error);\n        });\n};\n\nexport const readSelectedDoctorCookie = (app) => {\n    const url = \"/doctors/contact-session\";\n    fetch(url)\n        .then((res) => {\n            if (res.status === 200) {\n                return res.json();\n            }\n        })\n        .then((json) => {\n            if (json && json.selectedDoctor) {\n                app.setState({selectedDoctor: json.selectedDoctor});\n            }\n        })\n        .catch((error) => {\n            console.log(error);\n        });\n};\n\n\nexport const updateLoginForm = (loginComp, field) => {\n    const value = field.value;\n    const name = field.name;\n\n    loginComp.setState({\n        [name]: value,\n    });\n};\n\nexport const login = (loginComp, app) => {\n    const request = new Request(\"/doctors/login\", {\n        method: \"post\",\n        body: JSON.stringify(loginComp.state),\n        headers: {\n            Accept: \"application/json, text/plain, */*\",\n            \"Content-Type\": \"application/json\",\n        },\n    });\n\n    fetch(request)\n        .then((res) => {\n            if (res.status === 200) {\n                return res.json();\n            }\n        })\n        .then((json) => {\n            console.log(json);\n            if (json.currentDoctor !== undefined) {\n                app.setState({currentDoctor: json.currentDoctor});\n            }\n        })\n        .catch((error) => {\n            console.log(error);\n            loginComp.setState({wrong: true})\n        });\n};\n\nexport const logout = (app) => {\n    const url = \"/logout\";\n\n    fetch(url)\n        .then((res) => {\n            app.setState({\n                currentDoctor: null,\n                message: {type: \"\", body: \"\"},\n            });\n        })\n        .catch((error) => {\n            console.log(error);\n        });\n};\n\nexport const getDoctors = (ppc) => {\n    const url = \"/doctors\";\n    fetch(url)\n        .then((res) => {\n            if (res.status === 200) {\n                return res.json();\n            }\n        })\n        .then((json) => {\n            ppc.setState({\n                doctorInfo: json\n            })\n        })\n        .catch((error) => {\n            console.log(error);\n        });\n};\n\n\nconst updateWatchlist = (doctor, patient) => {\n    const url = \"/doctors\";\n    console.log(patient);\n    console.log(doctor);\n    const request = new Request(url, {\n        method: \"put\",\n        body: JSON.stringify({\n            patient: patient,\n            doctor: doctor\n        }),\n        headers: {\n            Accept: \"application/json, text/plain, */*\",\n            \"Content-Type\": \"application/json\",\n        },\n    });\n    return new Promise(resolve => {\n        fetch(request).then(res => {\n            if (res.status === 200) {\n                return (res.json())\n            }\n        }).then(json => {\n            resolve(json)\n        }).catch(error => {\n            console.log(error)\n        })\n    })\n};\n\n\nexport const addPatientToWatchlist = (button, doctor, patient, app) => {\n\n    updateWatchlist(doctor, patient).then(res => {\n\n        if (res) {\n            app.state.currentDoctor.watchlist = res.watchlist;\n            button.innerText = 'Added!';\n            setTimeout(function () {\n                button.innerText = 'Add to List'\n            }, 1000)\n        } else {\n            button.innerText = 'Failed!';\n            setTimeout(function () {\n                button.innerText = 'Add to List'\n            }, 1000)\n        }\n    })\n};\n\nexport const removePatientFromWatchlist = (app) => {\n    const url = \"/doctors/delfwlist\";\n    \n    const doctor = app.state.currDoctor\n    const patient = app.state.curr\n\n    const request = new Request(url, {\n        method: \"put\",\n        body: JSON.stringify({\n            patient: patient,\n            doctor: doctor,\n        }),\n        headers: {\n            Accept: \"application/json, text/plain, */*\",\n            \"Content-Type\": \"application/json\",\n        },\n    });\n    fetch(request).then((res) => {\n        if (res.status === 200) {\n            return res.json()\n        } else {\n            throw new Error()\n        }\n    })\n    .then((json) => {\n        if (json !== null && json !== undefined) {\n            app.setState({currDoctor: json})\n        }\n    })\n    .catch((error) => {\n            console.log(error);\n        });\n};\n\nexport const updateSelectedPatient = () => {\n    const url = \"/patients/contact-session\";\n    const request = new Request(url, {\n        method: \"put\",\n        body: JSON.stringify({\n            selectedPatient: null\n        }),\n        headers: {\n            Accept: \"application/json, text/plain, */*\",\n            \"Content-type\": \"application/json\",\n        },\n    });\n    return new Promise(resolve => {\n        fetch(request).then(res => {\n            if (res.status === 200) {\n                return res.json()\n            }\n        }).then(json => {\n            resolve(json)\n        })\n    }).catch(error => {\n        console.log(error)\n    })\n};\n\nexport const AddToWatchlist = (app, button, doctor, patient) => {\n    const url = \"/doctors\";\n    console.log(patient);\n    console.log(doctor);\n    console.log(\"Add to watchlist called\")\n    const request = new Request(url, {\n        method: \"put\",\n        body: JSON.stringify({\n            patient: patient,\n            doctor: doctor\n        }),\n        headers: {\n            Accept: \"application/json, text/plain, */*\",\n            \"Content-Type\": \"application/json\",\n        },\n    });\n    fetch(request).then(res => {\n        if (res.status === 200) {\n            // console.log(\"request normal\")\n            return res.json()\n        } else {\n            throw new Error()\n        }\n    }).then((json) => {\n        if (json !== undefined && json !== null) {\n            button.disabled = true;\n            // console.log(json)\n            app.setState({watchlist: json.watchlist, success: \"Patient added to watchlist!\", error: \"\"})\n        } else {\n            throw new Error()\n        }\n    })\n    .catch(error => {\n        button.disabled = true\n        app.setState({error: \"Failed to add patient to watchlist\", success: \"\"})\n        setTimeout(function () {\n            button.disabled = false\n        }, 1000)\n    })\n\n};\n\nexport const endDoctorChat = (app) => {\n    updateSelectedPatient().then(json => {\n        if (json) {\n            app.setState({\n                selectedPatient: json.selectedPatient\n            })\n        }\n    }).catch(error => {\n        console.log(error)\n    })\n};\n\nexport const getPatients = (app) => {\n    const url = \"/patients\"\n\n    fetch(url)\n        .then((res) => {\n            if (res.status === 200) {\n                return res.json()\n            } else {\n                throw new Error()\n            }\n        }).then((json) => {\n        if (json !== null && json !== undefined) {\n            console.log(json)\n            app.setState({patients: json})\n            // app.setState({error: \"success\"})\n        } else {\n            app.setState({error: \"Cannot retrieve patient accounts information!\"})\n        }\n    }).catch((e) => {\n        console.log(\"error caught\")\n        app.setState({error: \"Cannot retrieve patient accounts information!\"})\n    })\n  }\n\nexport const getWatchlist = (app, id) => {\n    const url = `/doctors/get-doctor-by-id/${id}`\n    console.log(id)\n\n    fetch(url)\n    .then((res) => {\n        if (res.status === 200) {\n            console.log(\"returning json\")\n            return res.json()\n        } else {\n            throw new Error()\n        }\n    })\n    .then((json) => {\n        if (json !== null && json !== undefined) {\n        console.log(json)\n            app.setState({watchlist: json.watchlist})\n        } else {\n            throw new Error()\n        }\n    })\n    .catch((e) => {\n        console.log(e)\n    })\n}\n"]},"metadata":{},"sourceType":"module"}