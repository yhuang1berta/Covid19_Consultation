{"ast":null,"code":"import _defineProperty from\"/Users/yehuang/309_group/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";export var readPatientCookie=function readPatientCookie(app){var url=\"/patients/check-session\";fetch(url).then(function(res){if(res.status===200){return res.json();}}).then(function(json){if(json&&json.currentPatient){app.setState({currentPatient:json.currentPatient});}}).catch(function(error){console.log(error);});};export var readSelectedPatientCookie=function readSelectedPatientCookie(app){var url=\"/patients/contact-session\";fetch(url).then(function(res){if(res.status===200){return res.json();}}).then(function(json){if(json){app.setState({selectedPatient:json.selectedPatient});}}).catch(function(error){console.log(error);});};export var updateLoginForm=function updateLoginForm(loginComp,field){var value=field.value;var name=field.name;loginComp.setState(_defineProperty({},name,value));};export var login=function login(loginComp,app){var request=new Request(\"/patients/login\",{method:\"post\",body:JSON.stringify(loginComp.state),headers:{Accept:\"application/json, text/plain, */*\",\"Content-Type\":\"application/json\"}});fetch(request).then(function(res){if(res.status===200){return res.json();}}).then(function(json){console.log(json);console.log(json.currentPatient);if(json.currentPatient!==null&&json.currentPatient.username!==undefined){console.log(\"entered\");app.setState({currentPatient:json.currentPatient});console.log(app.state);}}).catch(function(error){console.log(error);loginComp.setState({wrong:true});});};export var register=function register(registerComp,app){var url=\"/patients\";var patient=registerComp.state;var request=new Request(url,{method:\"post\",body:JSON.stringify(patient),headers:{Accept:\"application/json, text/plain, */*\",\"Content-type\":\"application/json\"}});// console.log(JSON.stringify(patient));\nfetch(request).then(function(res){// console.log(\"first then: \")\n// console.log(app.state)\nif(res.status===200){return res.json();}else{throw new Error();}}).then(function(json){if(!app.state.currentPatient&&app.state.currentPatient!==undefined){app.setState({currentPatient:json});}}).catch(function(e){registerComp.error=\"Patient account cannot be created at the moment!\";registerComp.setState(registerComp.state);});};export var logout=function logout(app){var url=\"/logout\";fetch(url).then(function(res){app.setState({currentPatient:null,message:{type:\"\",body:\"\"}});}).catch(function(error){console.log(error);});};export var endPatientChat=function endPatientChat(app){var url=\"/doctors/contact-session\";var request=new Request(url,{method:\"put\",body:JSON.stringify({selectedDoctor:null}),headers:{Accept:\"application/json, text/plain, */*\",\"Content-type\":\"application/json\"}});fetch(request).then(function(res){if(res.status===200){app.setState({selectedDoctor:null});}}).catch(function(error){console.log(error);});};export var readPatientVisitHistory=function readPatientVisitHistory(app){var patient=app.state.currentPatient;var url=\"/patients/read-patient-visit-history/\".concat(patient._id);fetch(url).then(function(res){if(res.status===200){return res.json();}else{throw new Error();}}).then(function(json){if(json!==null&&json!==undefined){app.setState({currentPatient:json});}}).catch(function(e){console.log(e);});};","map":{"version":3,"sources":["/Users/yehuang/309_group/client/src/actions/patients.js"],"names":["readPatientCookie","app","url","fetch","then","res","status","json","currentPatient","setState","catch","error","console","log","readSelectedPatientCookie","selectedPatient","updateLoginForm","loginComp","field","value","name","login","request","Request","method","body","JSON","stringify","state","headers","Accept","username","undefined","wrong","register","registerComp","patient","Error","e","logout","message","type","endPatientChat","selectedDoctor","readPatientVisitHistory","_id"],"mappings":"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","sourcesContent":["export const readPatientCookie = (app) => {\n    const url = \"/patients/check-session\";\n    fetch(url)\n        .then((res) => {\n            if (res.status === 200) {\n                return res.json();\n            }\n        })\n        .then((json) => {\n            if (json && json.currentPatient) {\n                app.setState({currentPatient: json.currentPatient});\n            }\n        })\n        .catch((error) => {\n            console.log(error);\n        })\n};\n\nexport const readSelectedPatientCookie = (app) => {\n    const url = \"/patients/contact-session\";\n    fetch(url)\n        .then((res) => {\n            if (res.status === 200) {\n                return res.json();\n            }\n        })\n        .then((json) => {\n            if (json) {\n                app.setState({selectedPatient: json.selectedPatient});\n            }\n        })\n        .catch((error) => {\n            console.log(error);\n        })\n};\n\nexport const updateLoginForm = (loginComp, field) => {\n    const value = field.value;\n    const name = field.name;\n\n    loginComp.setState({\n        [name]: value,\n    });\n};\n\n\nexport const login = (loginComp, app) => {\n    const request = new Request(\"/patients/login\", {\n        method: \"post\",\n        body: JSON.stringify(loginComp.state),\n        headers: {\n            Accept: \"application/json, text/plain, */*\",\n            \"Content-Type\": \"application/json\",\n        },\n    });\n\n    fetch(request)\n        .then((res) => {\n            if (res.status === 200) {\n                return res.json();\n            }\n        })\n        .then((json) => {\n            console.log(json);\n            console.log(json.currentPatient);\n            if (json.currentPatient !== null && json.currentPatient.username !== undefined) {\n                console.log(\"entered\")\n                app.setState({currentPatient: json.currentPatient});\n                console.log(app.state)\n            }\n        })\n        .catch((error) => {\n            console.log(error);\n            loginComp.setState({wrong: true})\n        })\n\n\n};\n\n\nexport const register = (registerComp, app) => {\n    const url = \"/patients\";\n\n    const patient = registerComp.state;\n\n    const request = new Request(url, {\n        method: \"post\",\n        body: JSON.stringify(patient),\n        headers: {\n            Accept: \"application/json, text/plain, */*\",\n            \"Content-type\": \"application/json\",\n        },\n    });\n\n    // console.log(JSON.stringify(patient));\n\n    fetch(request)\n        .then(function (res) {\n            // console.log(\"first then: \")\n            // console.log(app.state)\n            if (res.status === 200) {\n                return res.json()\n            } else {\n                throw new Error()\n            }\n        })\n        .then((json) => {\n            if (!app.state.currentPatient && app.state.currentPatient !== undefined) {\n                app.setState({currentPatient: json})\n            }\n        })\n        .catch((e) => {\n            registerComp.error = \"Patient account cannot be created at the moment!\"\n            registerComp.setState(registerComp.state)\n        })\n};\nexport const logout = (app) => {\n    const url = \"/logout\";\n    fetch(url)\n        .then((res) => {\n            app.setState({\n                currentPatient: null,\n                message: {type: \"\", body: \"\"},\n            });\n        })\n        .catch((error) => {\n            console.log(error);\n        })\n};\n\nexport const endPatientChat = (app) => {\n    const url = \"/doctors/contact-session\";\n    const request = new Request(url, {\n        method: \"put\",\n        body: JSON.stringify({\n            selectedDoctor: null\n        }),\n        headers: {\n            Accept: \"application/json, text/plain, */*\",\n            \"Content-type\": \"application/json\",\n        },\n    });\n    fetch(request).then(res => {\n        if (res.status === 200) {\n            app.setState(\n                {\n                    selectedDoctor: null\n                }\n            );\n        }\n    }).catch(error => {\n        console.log(error);\n    });\n};\n\nexport const readPatientVisitHistory = (app) => {\n\n    const patient = app.state.currentPatient\n    const url = `/patients/read-patient-visit-history/${patient._id}`\n\n    fetch(url)\n    .then((res) => {\n        if (res.status === 200) {\n            return res.json()\n        } else {\n            throw new Error()\n        }\n    })\n    .then((json) => {\n        if (json !== null && json !== undefined) {\n            app.setState({currentPatient: json})\n        }\n    })\n    .catch((e) => {\n        console.log(e)\n    })\n}\n\n"]},"metadata":{},"sourceType":"module"}