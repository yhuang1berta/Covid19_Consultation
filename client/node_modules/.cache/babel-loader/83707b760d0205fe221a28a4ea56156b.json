{"ast":null,"code":"import _defineProperty from\"/Users/yehuang/309_group/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";export var readDoctorCookie=function readDoctorCookie(app){var url=\"/doctors/check-session\";fetch(url).then(function(res){if(res.status===200){return res.json();}}).then(function(json){if(json&&json.currentDoctor){app.setState({currentDoctor:json.currentDoctor});}}).catch(function(error){console.log(error);});};export var readSelectedDoctorCookie=function readSelectedDoctorCookie(app){var url=\"/doctors/contact-session\";fetch(url).then(function(res){if(res.status===200){return res.json();}}).then(function(json){if(json&&json.selectedDoctor){app.setState({selectedDoctor:json.selectedDoctor});}}).catch(function(error){console.log(error);});};export var updateLoginForm=function updateLoginForm(loginComp,field){var value=field.value;var name=field.name;loginComp.setState(_defineProperty({},name,value));};export var login=function login(loginComp,app){var request=new Request(\"/doctors/login\",{method:\"post\",body:JSON.stringify(loginComp.state),headers:{Accept:\"application/json, text/plain, */*\",\"Content-Type\":\"application/json\"}});fetch(request).then(function(res){if(res.status===200){return res.json();}}).then(function(json){console.log(json);if(json.currentDoctor!==undefined){app.setState({currentDoctor:json.currentDoctor});}}).catch(function(error){console.log(error);loginComp.setState({wrong:true});});};export var logout=function logout(app){var url=\"/logout\";fetch(url).then(function(res){app.setState({currentDoctor:null,message:{type:\"\",body:\"\"}});}).catch(function(error){console.log(error);});};export var getDoctors=function getDoctors(ppc){var url=\"/doctors\";fetch(url).then(function(res){if(res.status===200){return res.json();}}).then(function(json){ppc.setState({doctorInfo:json});}).catch(function(error){console.log(error);});};export var removePatientFromWatchlist=function removePatientFromWatchlist(doctor,patient){var url=\"/doctors/delfwlist\";var request=new Request(url,{method:\"put\",body:JSON.stringify({patient:patient,doctor:doctor}),headers:{Accept:\"application/json, text/plain, */*\",\"Content-Type\":\"application/json\"}});fetch(request).then(function(res){if(res.status===200){console.log(\"success :)\");}else{console.log(\"failed :(\");}}).catch(function(error){console.log(error);});};var updateWatchlist=function updateWatchlist(doctor,patient){var url=\"/doctors\";console.log(patient);console.log(doctor);var request=new Request(url,{method:\"put\",body:JSON.stringify({patient:patient,doctor:doctor}),headers:{Accept:\"application/json, text/plain, */*\",\"Content-Type\":\"application/json\"}});return new Promise(function(resolve){fetch(request).then(function(res){if(res.status===200){resolve(\"added\");}}).catch(function(error){console.log(error);});});};export var addPatientToWatchlist=function addPatientToWatchlist(button,doctor,patient){updateWatchlist(doctor,patient).then(function(res){if(res&&res===\"added\"){button.innerText=\"Added!\";setTimeout(function(){button.innerText=\"Add to List\";},1000);}else{button.innerText=\"Failed!\";setTimeout(function(){button.innerText=\"Add to List\";},1000);}});};export var updateSelectedPatient=function updateSelectedPatient(){var url=\"/patients/contact-session\";var request=new Request(url,{method:\"put\",body:JSON.stringify({selectedPatient:null}),headers:{Accept:\"application/json, text/plain, */*\",\"Content-type\":\"application/json\"}});return new Promise(function(resolve){fetch(request).then(function(res){if(res.status===200){resolve(res.json());}});}).catch(function(error){console.log(error);});};export var AddToWatchlist=function AddToWatchlist(app,button,doctor,patient){var url=\"/doctors\";// console.log(patient);\n// console.log(doctor);\nconsole.log(\"Add to watchlist called\");var request=new Request(url,{method:\"put\",body:JSON.stringify({patient:patient,doctor:doctor}),headers:{Accept:\"application/json, text/plain, */*\",\"Content-Type\":\"application/json\"}});fetch(request).then(function(res){if(res.status===200){return res.json();}else{throw new Error();}}).then(function(json){if(json!==undefined&&json!==null){button.disabled=true;console.log(json,watchlist);app.setState({watchlist:json.watchlist,success:\"Patient added to watchlist!\",error:\"\"});}else{throw new Error();}}).catch(function(error){button.disabled=true;app.setState({error:\"Failed to add patient to watchlist\",success:\"\"});setTimeout(function(){button.disabled=false;},1000);});};export var endDoctorChat=function endDoctorChat(app){updateSelectedPatient().then(function(json){if(json&&json.selectedPatient){app.setState({selectedPatient:json.selectedPatient});}}).catch(function(error){console.log(error);});};export var getPatients=function getPatients(app){var url=\"/patients\";fetch(url).then(function(res){if(res.status===200){return res.json();}else{throw new Error();}}).then(function(json){if(json!==null&&json!==undefined){console.log(json);app.setState({patients:json});// app.setState({error: \"success\"})\n}else{app.setState({error:\"Cannot retrieve patient accounts information!\"});}});};export var getWatchlist=function getWatchlist(app,id){var url=\"/doctors/get-doctor-by-id/\".concat(id);console.log(id);fetch(url).then(function(res){if(res.status===200){console.log(\"returning json\");return res.json();}else{throw new Error();}}).then(function(json){if(json!==null&&json!==undefined){console.log(json);app.setState({watchlist:json.watchlist});}else{throw new Error();}}).catch(function(e){console.log(e);});};","map":{"version":3,"sources":["/Users/yehuang/309_group/client/src/actions/doctor.js"],"names":["readDoctorCookie","app","url","fetch","then","res","status","json","currentDoctor","setState","catch","error","console","log","readSelectedDoctorCookie","selectedDoctor","updateLoginForm","loginComp","field","value","name","login","request","Request","method","body","JSON","stringify","state","headers","Accept","undefined","wrong","logout","message","type","getDoctors","ppc","doctorInfo","removePatientFromWatchlist","doctor","patient","updateWatchlist","Promise","resolve","addPatientToWatchlist","button","innerText","setTimeout","updateSelectedPatient","selectedPatient","AddToWatchlist","Error","disabled","watchlist","success","endDoctorChat","getPatients","patients","getWatchlist","id","e"],"mappings":"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","sourcesContent":["export const readDoctorCookie = (app) => {\n  const url = \"/doctors/check-session\";\n  fetch(url)\n    .then((res) => {\n      if (res.status === 200) {\n        return res.json();\n      }\n    })\n    .then((json) => {\n      if (json && json.currentDoctor) {\n        app.setState({ currentDoctor: json.currentDoctor });\n      }\n    })\n    .catch((error) => {\n      console.log(error);\n    });\n};\n\nexport const readSelectedDoctorCookie = (app) => {\n  const url = \"/doctors/contact-session\";\n  fetch(url)\n    .then((res) => {\n      if (res.status === 200) {\n        return res.json();\n      }\n    })\n    .then((json) => {\n      if (json && json.selectedDoctor) {\n        app.setState({ selectedDoctor: json.selectedDoctor });\n      }\n    })\n    .catch((error) => {\n      console.log(error);\n    });\n};\n\nexport const updateLoginForm = (loginComp, field) => {\n  const value = field.value;\n  const name = field.name;\n\n  loginComp.setState({\n    [name]: value,\n  });\n};\n\nexport const login = (loginComp, app) => {\n  const request = new Request(\"/doctors/login\", {\n    method: \"post\",\n    body: JSON.stringify(loginComp.state),\n    headers: {\n      Accept: \"application/json, text/plain, */*\",\n      \"Content-Type\": \"application/json\",\n    },\n  });\n\n  fetch(request)\n    .then((res) => {\n      if (res.status === 200) {\n        return res.json();\n      }\n    })\n    .then((json) => {\n      console.log(json);\n      if (json.currentDoctor !== undefined) {\n        app.setState({ currentDoctor: json.currentDoctor });\n      }\n    })\n    .catch((error) => {\n      console.log(error);\n      loginComp.setState({ wrong: true });\n    });\n};\n\nexport const logout = (app) => {\n  const url = \"/logout\";\n\n  fetch(url)\n    .then((res) => {\n      app.setState({\n        currentDoctor: null,\n        message: { type: \"\", body: \"\" },\n      });\n    })\n    .catch((error) => {\n      console.log(error);\n    });\n};\n\nexport const getDoctors = (ppc) => {\n  const url = \"/doctors\";\n  fetch(url)\n    .then((res) => {\n      if (res.status === 200) {\n        return res.json();\n      }\n    })\n    .then((json) => {\n      ppc.setState({\n        doctorInfo: json,\n      });\n    })\n    .catch((error) => {\n      console.log(error);\n    });\n};\n\nexport const removePatientFromWatchlist = (doctor, patient) => {\n  const url = \"/doctors/delfwlist\";\n  const request = new Request(url, {\n    method: \"put\",\n    body: JSON.stringify({\n      patient: patient,\n      doctor: doctor,\n    }),\n    headers: {\n      Accept: \"application/json, text/plain, */*\",\n      \"Content-Type\": \"application/json\",\n    },\n  });\n  fetch(request)\n    .then((res) => {\n      if (res.status === 200) {\n        console.log(\"success :)\");\n      } else {\n        console.log(\"failed :(\");\n      }\n    })\n    .catch((error) => {\n      console.log(error);\n    });\n};\n\nconst updateWatchlist = (doctor, patient) => {\n  const url = \"/doctors\";\n  console.log(patient);\n  console.log(doctor);\n  const request = new Request(url, {\n    method: \"put\",\n    body: JSON.stringify({\n      patient: patient,\n      doctor: doctor,\n    }),\n    headers: {\n      Accept: \"application/json, text/plain, */*\",\n      \"Content-Type\": \"application/json\",\n    },\n  });\n  return new Promise((resolve) => {\n    fetch(request)\n      .then((res) => {\n        if (res.status === 200) {\n          resolve(\"added\");\n        }\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  });\n};\n\nexport const addPatientToWatchlist = (button, doctor, patient) => {\n  updateWatchlist(doctor, patient).then((res) => {\n    if (res && res === \"added\") {\n      button.innerText = \"Added!\";\n      setTimeout(function () {\n        button.innerText = \"Add to List\";\n      }, 1000);\n    } else {\n      button.innerText = \"Failed!\";\n      setTimeout(function () {\n        button.innerText = \"Add to List\";\n      }, 1000);\n    }\n  });\n};\n\nexport const updateSelectedPatient = () => {\n  const url = \"/patients/contact-session\";\n  const request = new Request(url, {\n    method: \"put\",\n    body: JSON.stringify({\n      selectedPatient: null,\n    }),\n    headers: {\n      Accept: \"application/json, text/plain, */*\",\n      \"Content-type\": \"application/json\",\n    },\n  });\n  return new Promise((resolve) => {\n    fetch(request).then((res) => {\n      if (res.status === 200) {\n        resolve(res.json());\n      }\n    });\n  }).catch((error) => {\n    console.log(error);\n  });\n};\n\nexport const AddToWatchlist = (app, button, doctor, patient) => {\n    const url = \"/doctors\";\n    // console.log(patient);\n    // console.log(doctor);\n    console.log(\"Add to watchlist called\")\n    const request = new Request(url, {\n        method: \"put\",\n        body: JSON.stringify({\n            patient: patient,\n            doctor: doctor\n        }),\n        headers: {\n            Accept: \"application/json, text/plain, */*\",\n            \"Content-Type\": \"application/json\",\n        },\n    });\n    fetch(request).then(res => {\n        if (res.status === 200) {\n            return res.json()\n        } else {\n            throw new Error()\n        }\n    }).then((json) => {\n        if (json !== undefined && json !== null) {\n            button.disabled = true;\n            console.log(json,watchlist)\n            app.setState({watchlist: json.watchlist, success: \"Patient added to watchlist!\", error: \"\"})\n        } else {\n            throw new Error()\n        }\n    })\n    .catch(error => {\n        button.disabled = true\n        app.setState({error: \"Failed to add patient to watchlist\", success: \"\"})\n        setTimeout(function () {\n            button.disabled = false\n        }, 1000)\n    })\n\n};\n\nexport const endDoctorChat = (app) => {\n  updateSelectedPatient()\n    .then((json) => {\n      if (json && json.selectedPatient) {\n        app.setState({\n          selectedPatient: json.selectedPatient,\n        });\n      }\n    })\n    .catch((error) => {\n      console.log(error);\n    });\n};\n\nexport const getPatients = (app) => {\n  const url = \"/patients\";\n\n  fetch(url)\n    .then((res) => {\n      if (res.status === 200) {\n        return res.json();\n      } else {\n        throw new Error();\n      }\n    })\n    .then((json) => {\n      if (json !== null && json !== undefined) {\n        console.log(json);\n        app.setState({ patients: json });\n        // app.setState({error: \"success\"})\n      } else {\n        app.setState({\n          error: \"Cannot retrieve patient accounts information!\",\n        });\n      }\n    })\n  }\n\n  export const getWatchlist = (app, id) => {\n      const url = `/doctors/get-doctor-by-id/${id}`\n      console.log(id)\n\n      fetch(url)\n      .then((res) => {\n          if (res.status === 200) {\n              console.log(\"returning json\")\n              return res.json()\n          } else {\n              throw new Error()\n          }\n      })\n      .then((json) => {\n          if (json !== null && json !== undefined) {\n            console.log(json)\n              app.setState({watchlist: json.watchlist})\n          } else {\n              throw new Error()\n          }\n      })\n      .catch((e) => {\n          console.log(e)\n      })\n  }\n"]},"metadata":{},"sourceType":"module"}