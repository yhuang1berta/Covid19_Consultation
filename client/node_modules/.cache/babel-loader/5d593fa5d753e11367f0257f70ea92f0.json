{"ast":null,"code":"export const readAdminCookie = app => {\n  const url = \"/admins/check-session\";\n  fetch(url).then(res => {\n    if (res.status === 200) {\n      return res.json();\n    }\n  }).then(json => {\n    if (json && json.currentAdmin) {\n      app.setState({\n        currentAdmin: json.currentAdmin\n      });\n    }\n  }).catch(error => {\n    console.log(error);\n  });\n};\nexport const updateLoginForm = (loginComp, field) => {\n  const value = field.value;\n  const name = field.name;\n  loginComp.setState({\n    [name]: value\n  });\n};\nexport const login = (loginComp, app) => {\n  const request = new Request(\"/admins/login\", {\n    method: \"post\",\n    body: JSON.stringify(loginComp.state),\n    headers: {\n      Accept: \"application/json, text/plain, */*\",\n      \"Content-Type\": \"application/json\"\n    }\n  });\n  fetch(request).then(res => {\n    if (res.status === 200) {\n      return res.json();\n    }\n  }).then(json => {\n    console.log(json);\n\n    if (json.currentAdmin !== undefined) {\n      app.setState({\n        currentAdmin: json.currentAdmin\n      });\n    }\n  }).catch(error => {\n    console.log(error);\n  });\n};\nexport const logout = app => {\n  const url = \"/logout\";\n  fetch(url).then(res => {\n    app.setState({\n      currentAdmin: null,\n      message: {\n        type: \"\",\n        body: \"\"\n      }\n    });\n  }).catch(error => {\n    console.log(error);\n  });\n};","map":{"version":3,"sources":["/Users/yehuang/309_group/client/src/actions/admin.js"],"names":["readAdminCookie","app","url","fetch","then","res","status","json","currentAdmin","setState","catch","error","console","log","updateLoginForm","loginComp","field","value","name","login","request","Request","method","body","JSON","stringify","state","headers","Accept","undefined","logout","message","type"],"mappings":"AAAA,OAAO,MAAMA,eAAe,GAAIC,GAAD,IAAS;AACtC,QAAMC,GAAG,GAAG,uBAAZ;AAEAC,EAAAA,KAAK,CAACD,GAAD,CAAL,CACGE,IADH,CACSC,GAAD,IAAS;AACb,QAAIA,GAAG,CAACC,MAAJ,KAAe,GAAnB,EAAwB;AACtB,aAAOD,GAAG,CAACE,IAAJ,EAAP;AACD;AACF,GALH,EAMGH,IANH,CAMSG,IAAD,IAAU;AACd,QAAIA,IAAI,IAAIA,IAAI,CAACC,YAAjB,EAA+B;AAC7BP,MAAAA,GAAG,CAACQ,QAAJ,CAAa;AAAED,QAAAA,YAAY,EAAED,IAAI,CAACC;AAArB,OAAb;AACD;AACF,GAVH,EAWGE,KAXH,CAWUC,KAAD,IAAW;AAChBC,IAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACD,GAbH;AAcD,CAjBM;AAmBP,OAAO,MAAMG,eAAe,GAAG,CAACC,SAAD,EAAYC,KAAZ,KAAsB;AACnD,QAAMC,KAAK,GAAGD,KAAK,CAACC,KAApB;AACA,QAAMC,IAAI,GAAGF,KAAK,CAACE,IAAnB;AAEAH,EAAAA,SAAS,CAACN,QAAV,CAAmB;AACjB,KAACS,IAAD,GAAQD;AADS,GAAnB;AAGD,CAPM;AASP,OAAO,MAAME,KAAK,GAAG,CAACJ,SAAD,EAAYd,GAAZ,KAAoB;AACvC,QAAMmB,OAAO,GAAG,IAAIC,OAAJ,CAAY,eAAZ,EAA6B;AAC3CC,IAAAA,MAAM,EAAE,MADmC;AAE3CC,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeV,SAAS,CAACW,KAAzB,CAFqC;AAG3CC,IAAAA,OAAO,EAAE;AACPC,MAAAA,MAAM,EAAE,mCADD;AAEP,sBAAgB;AAFT;AAHkC,GAA7B,CAAhB;AASAzB,EAAAA,KAAK,CAACiB,OAAD,CAAL,CACGhB,IADH,CACSC,GAAD,IAAS;AACb,QAAIA,GAAG,CAACC,MAAJ,KAAe,GAAnB,EAAwB;AACtB,aAAOD,GAAG,CAACE,IAAJ,EAAP;AACD;AACF,GALH,EAMGH,IANH,CAMSG,IAAD,IAAU;AACdK,IAAAA,OAAO,CAACC,GAAR,CAAYN,IAAZ;;AACA,QAAIA,IAAI,CAACC,YAAL,KAAsBqB,SAA1B,EAAqC;AACnC5B,MAAAA,GAAG,CAACQ,QAAJ,CAAa;AAAED,QAAAA,YAAY,EAAED,IAAI,CAACC;AAArB,OAAb;AACD;AACF,GAXH,EAYGE,KAZH,CAYUC,KAAD,IAAW;AAChBC,IAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACD,GAdH;AAeD,CAzBM;AA2BP,OAAO,MAAMmB,MAAM,GAAI7B,GAAD,IAAS;AAC7B,QAAMC,GAAG,GAAG,SAAZ;AAEAC,EAAAA,KAAK,CAACD,GAAD,CAAL,CACGE,IADH,CACSC,GAAD,IAAS;AACbJ,IAAAA,GAAG,CAACQ,QAAJ,CAAa;AACXD,MAAAA,YAAY,EAAE,IADH;AAEXuB,MAAAA,OAAO,EAAE;AAAEC,QAAAA,IAAI,EAAE,EAAR;AAAYT,QAAAA,IAAI,EAAE;AAAlB;AAFE,KAAb;AAID,GANH,EAOGb,KAPH,CAOUC,KAAD,IAAW;AAChBC,IAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACD,GATH;AAUD,CAbM","sourcesContent":["export const readAdminCookie = (app) => {\n  const url = \"/admins/check-session\";\n\n  fetch(url)\n    .then((res) => {\n      if (res.status === 200) {\n        return res.json();\n      }\n    })\n    .then((json) => {\n      if (json && json.currentAdmin) {\n        app.setState({ currentAdmin: json.currentAdmin });\n      }\n    })\n    .catch((error) => {\n      console.log(error);\n    });\n};\n\nexport const updateLoginForm = (loginComp, field) => {\n  const value = field.value;\n  const name = field.name;\n\n  loginComp.setState({\n    [name]: value,\n  });\n};\n\nexport const login = (loginComp, app) => {\n  const request = new Request(\"/admins/login\", {\n    method: \"post\",\n    body: JSON.stringify(loginComp.state),\n    headers: {\n      Accept: \"application/json, text/plain, */*\",\n      \"Content-Type\": \"application/json\",\n    },\n  });\n\n  fetch(request)\n    .then((res) => {\n      if (res.status === 200) {\n        return res.json();\n      }\n    })\n    .then((json) => {\n      console.log(json);\n      if (json.currentAdmin !== undefined) {\n        app.setState({ currentAdmin: json.currentAdmin });\n      }\n    })\n    .catch((error) => {\n      console.log(error);\n    });\n};\n\nexport const logout = (app) => {\n  const url = \"/logout\";\n\n  fetch(url)\n    .then((res) => {\n      app.setState({\n        currentAdmin: null,\n        message: { type: \"\", body: \"\" },\n      });\n    })\n    .catch((error) => {\n      console.log(error);\n    });\n};\n"]},"metadata":{},"sourceType":"module"}